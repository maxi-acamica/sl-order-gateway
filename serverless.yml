service: sl-order-gateway
provider:
  name: aws
  runtime: nodejs12.x
  stage: ${env:STAGE}
  region: ${env:REGION}
  environment:
    SERVICE_NAME: ${self:service}
    sqs_event: ${self:custom.globals.sqs.order}

  iamRoleStatements:
    - Effect: "Allow"
      Action:
        - "sqs:*"
      Resource: "*"    
# you can add packaging information here
package:
  individually: true

functions:
  ${file(src/index.yml)}

plugins:
  - serverless-webpack
  - serverless-dotenv-plugin
  - serverless-sam

custom:
  globals:
    role: ${self:service}-${self:provider.stage}-role
    sqs:
      order: ${self:service}-${self:provider.stage}
  webpack:
    webpackConfig: 'webpack.config.js'   # Name of webpack configuration file
    includeModules: false   # Node modules configuration for packaging
    packager: 'npm'   # Packager that will be used to package your external modules

resources:
  ${file(resources/resources.yml)}

